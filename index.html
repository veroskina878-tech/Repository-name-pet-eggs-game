<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pet Eggs Simulator</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
body{
 background:#0b0b0b;
 color:white;
 font-family:Arial;
 text-align:center;
 margin:0;
}
button{padding:10px;margin:5px;font-size:14px}
.box{border:1px solid #444;padding:10px;margin:8px}
.pet{animation:pop .3s}
@keyframes pop{from{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}

.common{color:#aaa}
.rare{color:#4af}
.epic{color:#c4f}
.legendary{color:#fa4}
.mythic{color:#f4f;text-shadow:0 0 8px #f0f}
.cosmic{
 background:linear-gradient(90deg,#0ff,#f0f,#ff0);
 -webkit-background-clip:text;
 color:transparent;
 text-shadow:0 0 12px #fff;
 animation:cosmic 2s linear infinite;
}
@keyframes cosmic{0%{filter:hue-rotate(0)}100%{filter:hue-rotate(360deg)}}

.panel{display:none}
</style>
</head>

<body>

<h2>ü•ö Pet Eggs Simulator</h2>
<div id="money"></div>
<div id="luck"></div>

<button onclick="upgradeLuck()">üçÄ –£–¥–∞—á–∞ (500)</button>
<button onclick="toggle('inventory')">üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
<button onclick="toggle('shop')">üõí –ë—É—Å—Ç–µ—Ä—ã</button>

<div id="eggs"></div>

<div id="inventory" class="panel"></div>
<div id="shop" class="panel"></div>

<h3>üêæ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∏—Ç–æ–º—Ü—ã</h3>
<div id="pets"></div>

<audio id="normal" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_0c61a6a99a.mp3"></audio>
<audio id="rareSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6cbe8c40a2.mp3"></audio>
<audio id="cosmicSound" src="https://cdn.pixabay.com/download/audio/2023/03/28/audio_42e1c8b0e5.mp3"></audio>

<script>
let data = JSON.parse(localStorage.getItem("save")) || {
 money:500,
 luck:0,
 pets:[],
 boost:1,
 boostEnd:0,
 luckBoostEnd:0
};

const rarities=[
 {name:"Common",cls:"common",m:1},
 {name:"Rare",cls:"rare",m:2},
 {name:"Epic",cls:"epic",m:4},
 {name:"Legendary",cls:"legendary",m:8},
 {name:"MYTHIC",cls:"mythic",m:25},
 {name:"COSMIC",cls:"cosmic",m:150}
];

const eggs=[
 {c:100,b:1},{c:1000,b:5},{c:10000,b:20},
 {c:100000,b:80},{c:1000000,b:300},{c:10000000,b:1500}
];

function save(){localStorage.setItem("save",JSON.stringify(data))}

function roll(){
 let r=Math.random()*100;
 let l=data.luck+(Date.now()<data.luckBoostEnd?10:0);
 if(r+l>99.95)return 5;
 if(r+l>99.5)return 4;
 if(r+l>93)return 3;
 if(r+l>75)return 2;
 if(r+l>50)return 1;
 return 0;
}

function openEgg(i){
 if(data.money<eggs[i].c)return;
 data.money-=eggs[i].c;
 let r=roll();
 let inc=eggs[i].b*rarities[r].m;
 data.pets.push({r,inc});
 playSound(r);
 save();update();
}

function playSound(r){
 if(r==5)cosmicSound.play();
 else if(r>=3)rareSound.play();
 else normal.play();
}

function upgradeLuck(){
 if(data.money<500)return;
 data.money-=500;
 data.luck++;
 save();update();
}

function toggle(id){
 let el=document.getElementById(id);
 el.style.display=el.style.display=="none"?"block":"none";
 if(id=="inventory")renderInv();
 if(id=="shop")renderShop();
}

function renderInv(){
 let c={};
 data.pets.forEach(p=>c[p.r]=(c[p.r]||0)+1);
 let t="üì¶ –í—Å–µ–≥–æ: "+data.pets.length+"<br>";
 for(let i in c)t+=rarities[i].name+": "+c[i]+"<br>";
 inventory.innerHTML=t;
}

function renderShop(){
 shop.innerHTML=`
 ‚ö° <button onclick="buyBoost(2,30000,2000)">x2 –¥–æ—Ö–æ–¥ (30—Å)</button><br>
 ‚ö° <button onclick="buyBoost(5,15000,5000)">x5 –¥–æ—Ö–æ–¥ (15—Å)</button><br>
 üçÄ <button onclick="buyLuck()">+10 —É–¥–∞—á–∏ (20—Å)</button>
 `;
}

function buyBoost(m,t,c){
 if(data.money<c)return;
 data.money-=c;
 data.boost=m;
 data.boostEnd=Date.now()+t;
 save();
}

function buyLuck(){
 if(data.money<3000)return;
 data.money-=3000;
 data.luckBoostEnd=Date.now()+20000;
 save();
}

setInterval(()=>{
 let mult=(Date.now()<data.boostEnd)?data.boost:1;
 let inc=0;
 data.pets.forEach(p=>inc+=p.inc);
 data.money+=inc*mult;
 save();update();
},3000);

function update(){
 money.innerText="üí∞ "+Math.floor(data.money);
 luck.innerText="üçÄ –£–¥–∞—á–∞: "+data.luck;

 eggsDiv="";
 eggs.forEach((e,i)=>{
  eggsDiv+=`<div class="box">ü•ö ${e.c} <button onclick="openEgg(${i})">–û—Ç–∫—Ä—ã—Ç—å</button></div>`;
 });
 eggs.innerHTML=eggsDiv;

 let p="";
 data.pets.slice(-10).forEach(x=>{
  p+=`<div class="pet ${rarities[x.r].cls}">
   ${rarities[x.r].name} +${x.inc}
  </div>`;
 });
 pets.innerHTML=p;
}
update();
</script>

</body>
</html>
