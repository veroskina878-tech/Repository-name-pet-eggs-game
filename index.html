<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pet Eggs Simulator</title>

<style>
body{
 margin:0;
 font-family:Arial,sans-serif;
 background:radial-gradient(circle at top,#1a1f44,#0c1022);
 color:#cfd3ff;
 overflow:hidden;
}

/* TOP */
#top{
 position:absolute;top:0;left:0;right:0;
 display:flex;justify-content:space-between;
 padding:10px;z-index:10;
}
.topBtn{
 background:linear-gradient(145deg,#5865ff,#7c86ff);
 border:none;border-radius:16px;
 padding:8px 14px;color:white;
 font-size:14px;
}

/* GAME */
#game{
 display:flex;height:100vh;
 padding-top:50px;
}
#left,#right{
 width:25%;padding:12px;
 background:linear-gradient(180deg,#141a33,#0b0f24);
}
#center{
 width:50%;
 display:flex;
 align-items:center;
 justify-content:center;
 flex-direction:column;
}

/* EGG */
#egg{
 width:150px;
 animation:float 5s ease-in-out infinite;
}
@keyframes float{
 0%{transform:translateY(0)}
 50%{transform:translateY(-20px)}
 100%{transform:translateY(0)}
}

/* BOTTOM */
#bottom{
 position:absolute;bottom:0;left:25%;width:50%;
 background:#000a;padding:10px;
 text-align:center;
 font-size:14px;
}

/* OVERLAYS */
.overlay{
 position:absolute;top:0;left:0;right:0;bottom:0;
 background:#000d;
 display:none;
 z-index:20;
 overflow-y:auto;
}
.panel{
 background:#141a33;
 margin:60px auto;
 padding:20px;
 width:85%;
 max-width:420px;
 border-radius:24px;
}

/* GALLERY */
.galleryItem{
 display:flex;
 justify-content:center;
 margin:20px 0;
 perspective:800px;
}
.pet3d{
 width:90px;height:90px;
 border-radius:20px;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:36px;
 animation:spin 6s linear infinite;
 transform-style:preserve-3d;
}
@keyframes spin{
 from{transform:rotateY(0deg)}
 to{transform:rotateY(360deg)}
}
.glow{
 box-shadow:0 0 25px rgba(255,255,255,.6);
}

/* GRAPH */
canvas{width:100%;height:120px}
button{margin-top:8px}

/* RARITY COLORS */
.c0{background:#2a2f55}
.c1{background:#2f4cff}
.c2{background:#9b4cff}
.c3{background:#ffb84c}
.c4{background:#ff4cff}
.c5{
 background:linear-gradient(45deg,#0ff,#f0f,#ff0);
 animation:rainbow 6s linear infinite;
}
@keyframes rainbow{
 from{filter:hue-rotate(0)}
 to{filter:hue-rotate(360deg)}
}
</style>
</head>

<body>

<div id="top">
 <button class="topBtn" onclick="openAnalytics()">üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</button>
 <button class="topBtn" onclick="openGallery()">üñº –ì–∞–ª–µ—Ä–µ—è</button>
</div>

<div id="game">
 <div id="left">
  <h3>ü•ö –Ø–π—Ü–∞</h3>
  <button onclick="openEgg(0)">ü•ö Cheap</button><br>
  <button onclick="openEgg(1)">üîµ Rare</button><br>
  <button onclick="openEgg(2)">üü£ Epic</button><br>
  <button onclick="openEgg(3)">üåà Cosmic</button>
 </div>

 <div id="center">
  <img id="egg" src="https://cdn-icons-png.flaticon.com/512/616/616430.png">
 </div>

 <div id="right">
  <h3>üêæ –ü–æ—Å–ª–µ–¥–Ω–∏–π</h3>
  <div id="lastPet">‚Äî</div>
 </div>
</div>

<div id="bottom">
 <div id="money"></div>
 <div id="perSec"></div>
</div>

<!-- ANALYTICS -->
<div id="analytics" class="overlay">
 <div class="panel">
  <h3>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
  <canvas id="chart"></canvas>
  <div id="stats"></div>
  <button onclick="closeAnalytics()">–ó–∞–∫—Ä—ã—Ç—å</button>
 </div>
</div>

<!-- GALLERY -->
<div id="gallery" class="overlay">
 <div class="panel">
  <h3>üñº –ì–∞–ª–µ—Ä–µ—è –ø–∏—Ç–æ–º—Ü–µ–≤</h3>
  <div id="galleryList"></div>
  <button onclick="closeGallery()">–ó–∞–∫—Ä—ã—Ç—å</button>
 </div>
</div>

<script>
let data = JSON.parse(localStorage.getItem("saveDeep")) || {
 money:500,
 pets:[],
 discovered:{},
 history:[]
};

const rarities=[
 {name:"Common",mul:1},
 {name:"Rare",mul:5},
 {name:"Epic",mul:25},
 {name:"Legendary",mul:150},
 {name:"MYTHIC",mul:1000},
 {name:"COSMIC",mul:10000}
];

const eggs=[
 // —Ä–∞–∑–Ω—ã–µ –∫—Ä–∏–≤—ã–µ
 [70,20,8,1.5,0.45,0.05],    // Cheap
 [40,30,20,7,2.7,0.3],      // Rare
 [20,25,30,15,8,2],         // Epic
 [5,10,20,30,25,10]         // Cosmic
];

function roll(curve){
 let r=Math.random()*100,sum=0;
 for(let i=0;i<curve.length;i++){
  sum+=curve[i];
  if(r<=sum)return i;
 }
 return 0;
}

function fmt(n){
 if(n>=1e6)return(n/1e6).toFixed(1)+" –º–ª–Ω";
 if(n>=1e3)return(n/1e3).toFixed(1)+" —Ç—ã—Å.";
 return Math.floor(n);
}

function openEgg(type){
 let r=roll(eggs[type]);
 let inc=0.05*rarities[r].mul;
 data.pets.push({r,inc});
 data.discovered[r]=true;
 lastPet.innerText=rarities[r].name+" (+"+fmt(inc)+"/—Å)";
 update();save();
}

setInterval(()=>{
 let ps=0;
 data.pets.forEach(p=>ps+=p.inc);
 data.money+=ps;
 data.history.push(data.money);
 if(data.history.length>30)data.history.shift();
 update();
},1000);

function update(){
 let ps=0;data.pets.forEach(p=>ps+=p.inc);
 money.innerText="üí∞ "+fmt(data.money);
 perSec.innerText="‚ö° "+fmt(ps)+" / —Å–µ–∫";
 drawChart();
}

function drawChart(){
 let c=document.getElementById("chart");
 let ctx=c.getContext("2d");
 ctx.clearRect(0,0,300,120);
 if(data.history.length<2)return;
 let max=Math.max(...data.history);
 ctx.strokeStyle="#7c86ff";
 ctx.beginPath();
 data.history.forEach((v,i)=>{
  let x=i*(300/(data.history.length-1));
  let y=120-(v/max)*100;
  i?ctx.lineTo(x,y):ctx.moveTo(x,y);
 });
 ctx.stroke();
}

function openAnalytics(){
 analytics.style.display="block";
 let total=data.pets.length;
 stats.innerHTML="–ü–∏—Ç–æ–º—Ü–µ–≤: "+total;
}
function closeAnalytics(){analytics.style.display="none"}

function openGallery(){
 gallery.style.display="block";
 let html="";
 Object.keys(data.discovered).forEach(r=>{
  html+=`
   <div class="galleryItem">
    <div class="pet3d c${r} ${r>=3?"glow":""}">
     üêæ
    </div>
   </div>`;
 });
 galleryList.innerHTML=html;
}
function closeGallery(){gallery.style.display="none"}

function save(){
 localStorage.setItem("saveDeep",JSON.stringify(data));
}

update();
</script>

</body>
</html>